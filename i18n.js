// ===== FocusFlow v2.0 Complete Translations =====
// Supported: English, Turkish, German, Spanish, French

const translations = {
    en: {
        // General
        appName: "FocusFlow",
        sessions: "sessions",
        focus: "Focus",
        shortBreak: "Break",
        longBreak: "Long",

        // Categories
        all: "All",
        nature: "Nature",
        ambience: "Ambience",
        home: "Home",
        noise: "Noise",
        favorites: "Favorites",
        music: "Music",

        // Sounds - Nature
        rain: "Rain",
        thunderstorm: "Thunderstorm",
        thunder: "Thunder",
        wind: "Wind",
        forest: "Forest",
        birds: "Birds",
        river: "River",
        waterfall: "Waterfall",
        ocean: "Ocean",
        beach: "Beach",

        // Sounds - Ambience
        cafe: "CafÃ©",
        office: "Office",
        library: "Library",
        restaurant: "Restaurant",
        city: "City",
        train: "Train",
        airplane: "Airplane",
        crowd: "Crowd",

        // Sounds - Home
        fireplace: "Fireplace",
        fan: "Fan",
        ac: "Air Conditioner",
        clock: "Clock",
        rainwindow: "Rain Window",
        keyboard: "Keyboard",

        // Sounds - Noise
        whitenoise: "White Noise",
        pinknoise: "Pink Noise",
        brownnoise: "Brown Noise",
        static: "TV Static",
        dryer: "Dryer",
        shower: "Shower",

        // Music
        lofi: "Lo-fi Beats",
        jazz: "Jazz",
        piano: "Piano",
        chillout: "Chill",

        // Stats & UI
        focused: "focused",
        dayStreak: "day streak",
        noFavorites: "No favorites yet. Tap â¤ï¸ to add!",
        timerRunning: "Timer running. Switch?",
        focusComplete: "Focus complete! ðŸŽ‰",
        breakTime: "Time for a break!",
        breakOver: "Break over! ðŸ’ª",
        readyToFocus: "Ready to focus?",
        footer: "Made with ðŸ’œ for focus lovers",

        // Settings
        customTimer: "Timer",
        sleepTimer: "Sleep",
        theme: "Theme",
        off: "Off",
        min: "min",

        // Sleep timer options
        sleepOff: "Off",
        sleep15: "15 min",
        sleep30: "30 min",
        sleep45: "45 min",
        sleep60: "60 min",

        // Audio Effects
        audioEffects: "Audio Effects",
        bass: "Bass",
        treble: "Treble",
        reverb: "Reverb",
        surround: "Surround"
    },
    tr: {
        appName: "FocusFlow",
        sessions: "oturum",
        focus: "Odaklan",
        shortBreak: "Mola",
        longBreak: "Uzun",

        all: "TÃ¼mÃ¼",
        nature: "DoÄŸa",
        ambience: "Ortam",
        home: "Ev",
        noise: "GÃ¼rÃ¼ltÃ¼",
        favorites: "Favoriler",
        music: "MÃ¼zik",

        rain: "YaÄŸmur",
        thunderstorm: "FÄ±rtÄ±na",
        thunder: "GÃ¶k GÃ¼rÃ¼ltÃ¼sÃ¼",
        wind: "RÃ¼zgar",
        forest: "Orman",
        birds: "KuÅŸlar",
        river: "Nehir",
        waterfall: "Åželale",
        ocean: "Okyanus",
        beach: "Sahil",

        cafe: "Kafe",
        office: "Ofis",
        library: "KÃ¼tÃ¼phane",
        restaurant: "Restoran",
        city: "Åžehir",
        train: "Tren",
        airplane: "UÃ§ak",
        crowd: "KalabalÄ±k",

        fireplace: "ÅžÃ¶mine",
        fan: "VantilatÃ¶r",
        ac: "Klima",
        clock: "Saat",
        rainwindow: "Pencerede YaÄŸmur",
        keyboard: "Klavye",

        whitenoise: "Beyaz GÃ¼rÃ¼ltÃ¼",
        pinknoise: "Pembe GÃ¼rÃ¼ltÃ¼",
        brownnoise: "Kahve GÃ¼rÃ¼ltÃ¼",
        static: "TV KarÄ±ncasÄ±",
        dryer: "Kurutma",
        shower: "DuÅŸ",

        lofi: "Lo-fi MÃ¼zik",
        jazz: "Caz",
        piano: "Piyano",
        chillout: "RahatlatÄ±cÄ±",

        focused: "odaklanma",
        dayStreak: "gÃ¼n seri",
        noFavorites: "HenÃ¼z favori yok. Eklemek iÃ§in â¤ï¸ dokun!",
        timerRunning: "ZamanlayÄ±cÄ± Ã§alÄ±ÅŸÄ±yor. DeÄŸiÅŸtirilsin mi?",
        focusComplete: "Odaklanma tamamlandÄ±! ðŸŽ‰",
        breakTime: "Mola zamanÄ±!",
        breakOver: "Mola bitti! ðŸ’ª",
        readyToFocus: "Odaklanmaya hazÄ±r mÄ±sÄ±n?",
        footer: "OdaklanmayÄ± sevenler iÃ§in ðŸ’œ ile yapÄ±ldÄ±",

        customTimer: "ZamanlayÄ±cÄ±",
        sleepTimer: "Uyku",
        theme: "Tema",
        off: "KapalÄ±",
        min: "dk",

        sleepOff: "KapalÄ±",
        sleep15: "15 dk",
        sleep30: "30 dk",
        sleep45: "45 dk",
        sleep60: "60 dk",

        audioEffects: "Ses Efektleri",
        bass: "Bas",
        treble: "Tiz",
        reverb: "YankÄ±",
        surround: "Ã‡evresel Ses"
    },
    de: {
        appName: "FocusFlow",
        sessions: "Sitzungen",
        focus: "Fokus",
        shortBreak: "Pause",
        longBreak: "Lang",

        all: "Alle",
        nature: "Natur",
        ambience: "Ambiente",
        home: "Zuhause",
        noise: "Rauschen",
        favorites: "Favoriten",
        music: "Musik",

        rain: "Regen",
        thunderstorm: "Gewitter",
        thunder: "Donner",
        wind: "Wind",
        forest: "Wald",
        birds: "VÃ¶gel",
        river: "Fluss",
        waterfall: "Wasserfall",
        ocean: "Ozean",
        beach: "Strand",

        cafe: "CafÃ©",
        office: "BÃ¼ro",
        library: "Bibliothek",
        restaurant: "Restaurant",
        city: "Stadt",
        train: "Zug",
        airplane: "Flugzeug",
        crowd: "Menge",

        fireplace: "Kamin",
        fan: "Ventilator",
        ac: "Klimaanlage",
        clock: "Uhr",
        rainwindow: "Regen Fenster",
        keyboard: "Tastatur",

        whitenoise: "WeiÃŸes Rauschen",
        pinknoise: "Rosa Rauschen",
        brownnoise: "Braunes Rauschen",
        static: "TV Rauschen",
        dryer: "Trockner",
        shower: "Dusche",

        lofi: "Lo-fi Beats",
        jazz: "Jazz",
        piano: "Klavier",
        chillout: "Entspannung",

        focused: "fokussiert",
        dayStreak: "Tage Serie",
        noFavorites: "Noch keine Favoriten. Tippe â¤ï¸ zum HinzufÃ¼gen!",
        timerRunning: "Timer lÃ¤uft. Wechseln?",
        focusComplete: "Fokus abgeschlossen! ðŸŽ‰",
        breakTime: "Zeit fÃ¼r eine Pause!",
        breakOver: "Pause vorbei! ðŸ’ª",
        readyToFocus: "Bereit zu fokussieren?",
        footer: "Mit ðŸ’œ fÃ¼r Fokus-Liebhaber gemacht",

        customTimer: "Timer",
        sleepTimer: "Schlaf",
        theme: "Thema",
        off: "Aus",
        min: "Min",

        sleepOff: "Aus",
        sleep15: "15 Min",
        sleep30: "30 Min",
        sleep45: "45 Min",
        sleep60: "60 Min"
    },
    es: {
        appName: "FocusFlow",
        sessions: "sesiones",
        focus: "Enfoque",
        shortBreak: "Pausa",
        longBreak: "Larga",

        all: "Todo",
        nature: "Naturaleza",
        ambience: "Ambiente",
        home: "Hogar",
        noise: "Ruido",
        favorites: "Favoritos",
        music: "MÃºsica",

        rain: "Lluvia",
        thunderstorm: "Tormenta",
        thunder: "Trueno",
        wind: "Viento",
        forest: "Bosque",
        birds: "PÃ¡jaros",
        river: "RÃ­o",
        waterfall: "Cascada",
        ocean: "OcÃ©ano",
        beach: "Playa",

        cafe: "CafÃ©",
        office: "Oficina",
        library: "Biblioteca",
        restaurant: "Restaurante",
        city: "Ciudad",
        train: "Tren",
        airplane: "AviÃ³n",
        crowd: "Multitud",

        fireplace: "Chimenea",
        fan: "Ventilador",
        ac: "Aire Acondicionado",
        clock: "Reloj",
        rainwindow: "Lluvia Ventana",
        keyboard: "Teclado",

        whitenoise: "Ruido Blanco",
        pinknoise: "Ruido Rosa",
        brownnoise: "Ruido MarrÃ³n",
        static: "TV EstÃ¡tica",
        dryer: "Secadora",
        shower: "Ducha",

        lofi: "Lo-fi Beats",
        jazz: "Jazz",
        piano: "Piano",
        chillout: "RelajaciÃ³n",

        focused: "enfocado",
        dayStreak: "dÃ­as racha",
        noFavorites: "Sin favoritos. Â¡Toca â¤ï¸ para aÃ±adir!",
        timerRunning: "Temporizador en marcha. Â¿Cambiar?",
        focusComplete: "Â¡Enfoque completo! ðŸŽ‰",
        breakTime: "Â¡Hora del descanso!",
        breakOver: "Â¡Descanso terminado! ðŸ’ª",
        readyToFocus: "Â¿Listo para enfocarte?",
        footer: "Hecho con ðŸ’œ para amantes del enfoque",

        customTimer: "Temporizador",
        sleepTimer: "Dormir",
        theme: "Tema",
        off: "Off",
        min: "min",

        sleepOff: "Off",
        sleep15: "15 min",
        sleep30: "30 min",
        sleep45: "45 min",
        sleep60: "60 min"
    },
    fr: {
        appName: "FocusFlow",
        sessions: "sessions",
        focus: "Focus",
        shortBreak: "Pause",
        longBreak: "Longue",

        all: "Tout",
        nature: "Nature",
        ambience: "Ambiance",
        home: "Maison",
        noise: "Bruit",
        favorites: "Favoris",
        music: "Musique",

        rain: "Pluie",
        thunderstorm: "Orage",
        thunder: "Tonnerre",
        wind: "Vent",
        forest: "ForÃªt",
        birds: "Oiseaux",
        river: "RiviÃ¨re",
        waterfall: "Cascade",
        ocean: "OcÃ©an",
        beach: "Plage",

        cafe: "CafÃ©",
        office: "Bureau",
        library: "BibliothÃ¨que",
        restaurant: "Restaurant",
        city: "Ville",
        train: "Train",
        airplane: "Avion",
        crowd: "Foule",

        fireplace: "CheminÃ©e",
        fan: "Ventilateur",
        ac: "Climatisation",
        clock: "Horloge",
        rainwindow: "Pluie FenÃªtre",
        keyboard: "Clavier",

        whitenoise: "Bruit Blanc",
        pinknoise: "Bruit Rose",
        brownnoise: "Bruit Brun",
        static: "TV Statique",
        dryer: "SÃ¨che-linge",
        shower: "Douche",

        lofi: "Lo-fi Beats",
        jazz: "Jazz",
        piano: "Piano",
        chillout: "DÃ©tente",

        focused: "concentrÃ©",
        dayStreak: "jours sÃ©rie",
        noFavorites: "Pas de favoris. Appuyez sur â¤ï¸ pour ajouter!",
        timerRunning: "Minuteur en cours. Changer?",
        focusComplete: "Focus terminÃ©! ðŸŽ‰",
        breakTime: "C'est l'heure de la pause!",
        breakOver: "Pause terminÃ©e! ðŸ’ª",
        readyToFocus: "PrÃªt Ã  vous concentrer?",
        footer: "Fait avec ðŸ’œ pour les amoureux de la concentration",

        customTimer: "Minuteur",
        sleepTimer: "Sommeil",
        theme: "ThÃ¨me",
        off: "Off",
        min: "min",

        sleepOff: "Off",
        sleep15: "15 min",
        sleep30: "30 min",
        sleep45: "45 min",
        sleep60: "60 min"
    }
};

// Detect browser/phone language
function detectLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0].toLowerCase();
    return translations[langCode] ? langCode : 'en';
}

let currentLang = localStorage.getItem('focusflow_lang') || detectLanguage();

function t(key) {
    return translations[currentLang]?.[key] || translations['en'][key] || key;
}

function setLanguage(lang) {
    if (translations[lang]) {
        currentLang = lang;
        localStorage.setItem('focusflow_lang', lang);
        updateUI();
    }
}

function updateUI() {
    // Update tab buttons
    document.querySelectorAll('.tab-btn').forEach(btn => {
        const mode = btn.dataset.mode;
        if (mode === 'focus') btn.textContent = t('focus');
        if (mode === 'shortBreak') btn.textContent = t('shortBreak');
        if (mode === 'longBreak') btn.textContent = t('longBreak');
    });

    // Update footer
    const footer = document.querySelector('.footer p');
    if (footer) footer.textContent = t('footer');

    // Update settings labels
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.dataset.i18n;
        if (key && t(key)) el.textContent = t(key);
    });

    // Update sleep timer options
    const sleepSelect = document.getElementById('sleepTimerSelect');
    if (sleepSelect) {
        sleepSelect.options[0].textContent = t('sleepOff') || 'Off';
        sleepSelect.options[1].textContent = t('sleep15') || '15 min';
        sleepSelect.options[2].textContent = t('sleep30') || '30 min';
        sleepSelect.options[3].textContent = t('sleep45') || '45 min';
        sleepSelect.options[4].textContent = t('sleep60') || '60 min';
    }

    // Update stats display
    updateStatsText();

    // Re-render categories and sounds with translations
    if (typeof renderCategories === 'function') renderCategories();
    if (typeof renderSounds === 'function') renderSounds();
}

function updateStatsText() {
    const statsDisplay = document.getElementById('statsDisplay');
    if (statsDisplay && window.state) {
        const hours = Math.floor(window.state.totalFocusTime / 3600);
        const mins = Math.floor((window.state.totalFocusTime % 3600) / 60);
        statsDisplay.textContent = `${hours}h ${mins}m ${t('focused')} | ðŸ”¥ ${window.state.streak} ${t('dayStreak')}`;
    }
}

// Get translated sound name
function getSoundName(soundId) {
    return t(soundId) || soundId;
}

// Get translated category name
function getCategoryName(catId) {
    return t(catId) || catId;
}

window.FocusFlowLang = {
    t,
    setLanguage,
    currentLang,
    updateUI,
    detectLanguage,
    getSoundName,
    getCategoryName,
    updateStatsText
};
